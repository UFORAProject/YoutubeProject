<!DOCTYPE html>
<html lang="en"
    xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	data-layout-decorate="~{samples/layout/sampleLayout}">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Page</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script th:inline = "javascript">
  /*
    <![CDATA[*/
      let header = 'https://www.youtube.com/embed/';
      let detail = /*[[${detail}]]*/ 'default';
      let ad = /*[[${list}]]*/ 'default';
      let chch = /*[[${url}]]*/ 'default';
      let url;
      let id;
      let i = 0;
    /*]]>
  */
</script>
<style>
  *{
    padding: 0px;
    margin: 0px;
  }
  /* header style */
  
    ul li img {
        vertical-align: middle;
    } /* ul, li, img 정렬 전부 적용하기 */

    
    ul li {
        height: 55px;
        line-height: 50px;
    } /* ul, li 바, 텍스트 위치 사이즈 */

    #header{
    background-color: #313132;
    
    text-size-adjust: 100%;
    vertical-align: middle;
  }
    ul{
        text-align: center;
        background-color: #ffff;
        vertical-align: middle;
    } /* ul 글자 위치, 그림자, 배경색, 수직 정렬 지정 */

    li{
        /*margin: 3px;*/
        display: inline-block;
        color:  white;
        vertical-align: middle;
    text-align: left;
    }

  /* header style */

  #table{
    margin: auto;
  }

  /* category style*/
  .category{
    background-color: 5px solid #ececec;
    border-top: 5px solid #ececec;
    border-right: 5px solid #ececec;
    border-left: 5px solid #ececec;
    border-bottom: 5px solid #ececec;
  }
  /* category style*/

  /* content style */
  .content{
    background-color: 5px solid #ececec;
    border-top: 5px solid #ececec;
    border-right: 5px solid #ececec;
    border-left: 5px solid #ececec;
    border-bottom: 5px solid #ececec;
  }
  /* content style */

  /* footer style */
    footer {
        left: 0;
        bottom: 0;
        width: 100%;
        padding: 0;
        text-align: center;
        color: white;
        background: #f5f5f7;  
        bottom: 0;


        background:url('https://farm9.staticflickr.com/8760/17195790401_ceeeafcddb_o.jpg');
        background-size:cover;
        font-family: 'Cabin Condensed', sans-serif;
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
    }


            
    svg{
        font-weight:bold;max-width:600px;height:auto;
    }

    .table_2{
        border-spacing: 10px;	  
        width: 100%;
        color: black;
        border-top : 2px solid white;
        border-right : none;
        border-left : none;
        border-bottom : none;
    }

  /* footer style */
</style>
<body>
  <!-- header -->
  <div th:replace="header.html"></div>
  <!-- header -->
<br>
<br>
<br>

  <!---- main ----->
  <table id = "table" border="0" cellpadding="1" cellspacing="1" style="height:600px; width:1024px" align=center>
	  <tbody>
		  <tr>


        <!---- 필터 ---->
			  <td style="width:255px" valign=top bgcolor="#ececec"  class = 'category' >&nbsp;
          <br>
          <p align=Center size=9><img src="https://i.ibb.co/TYG3bpM/Search.png"></p>
          <br>
          &nbsp;&nbsp;<strong> 채널 세부 정보 </strong>
          <div align="center">
            <table border="0" width = "90%">
              <tr th:each = "detail : ${detail}">
                <!--<td><span th:text = "${detail.totview}"></span></td>-->
                <td>
                <img id = 'profile' src="" alt="" width = "150px" height = "150px"><br>
                채널 명 : <span th:text = "${detail.ch_name}"></span><br>
                가입 날짜 : <span th:text = "${detail.regdate}"></span><br>
                팬클럽 유무 : <span th:text = "${detail.fan}"></span><br>
                한달 업로드 수 : <span th:text = "${detail.upload}"></span><br>
                인스타 태그 수 : <span th:text = "${detail.insta}"></span><br>
                카테고리 : <span th:text = "${detail.category}"></span><br>
                평균 광고 조회수 : <span th:text = "${detail.adavgview}"></span><br>
                광고 수 : <span th:text = "${detail.adcount}"></span><br>
                연락처 : <span th:text = "${detail.contact}"></span>
                </td>
                <script>
                  $('#profile').attr('src',detail[0].img);
                </script>
              </tr>
            </table>

            <br>
            <span th:if = "${ggim} == 0">
                <button type="button" class="btn btn-light" id="insert"><img src="https://i.ibb.co/g6MZYqm/calldibs-button.png" 
                  onmouseover="this.src='https://i.ibb.co/YDRmjrG/calldibs-button.png'" 
                  onmouseout="this.src='https://i.ibb.co/g6MZYqm/calldibs-button.png'"></button>
            </span>
            <span th:unless="${ggim} == 0">
                <button type="button" class="btn btn-light" id="delete"><img src="https://i.ibb.co/CJr1zpV/calldibs-button2.png"></button>
            </span>
            <script>
              $('#insert').click(function(){
                console.log('ㅋㅋㅋ');
                console.log(chch);
                if (confirm("찜 목록에 추가하시겠습니까?")) {
                  var html = "";
                  uri = '/ggimInsert'
                  html += '<form name="dataForm" action="'+uri+'" method="post">';
                  html += '<input type="hidden" name="ch_url" value="'+chch+'" />';
                  html += '</form>';
                  
                  $("body").append(html);
                  document.dataForm.submit();
                }
              });
              $('#delete').click(function(){
                console.log('ㅋㅋㅋ');
                console.log(chch);
                if (confirm("찜 목록에서 제거하시겠습니까?")) {
                  var html = "";
                  uri = '/ggimDelete'
                  html += '<form name="dataForm" action="'+uri+'" method="post">';
                  html += '<input type="hidden" name="ch_url" value="'+chch+'" />';
                  html += '</form>';
                  
                  $("body").append(html);
                  document.dataForm.submit();
                }
              });
            </script>
          </div>
			  </td>
        <!---- 필터 ---->


        <!---- 내용 ---->
        <td class="content" style="width:755px" align="center"  valign=top>
          <br>
          <table align=center valign=top border="0">
            
            <tr th:if="${list.empty}" height="50px">
              <img src="https://i.ibb.co/QdXBPC3/empty.png" alt="" width="80%" height="80%">
            </tr>
            <tr th:unless="${list.empty}" height="50px">
              <th> 광고 영상 </th>
              <th width = "10px"></th>
              <th> 업로드 날짜 </th>
              <th width = "10px"></th>
              <th> 좋아요 수 </th>
            </tr>
            <tr th:each="ad,i : ${list}" height="50px">
                <td>
                  <iframe th:id="${i.index}" width="480" height="270" src="" 
                    title="YouTube video player" frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
                  </iframe>
                  <script>
                    id = '#';
                    id = id + i;
                    url = header + ad[i].ad_url;
                    $(id).attr('src',url);
                    i = i+1;
                  </script>
                </td>
                <td></td>
                <td><a th:href="@{/DetailADvideo(adurl=${ad.ad_url})}"><span th:text="${ad.upday}"> 채널 이름 </span></a></td>
                <td></td>
                <td><span th:text="${ad.likecnt}"> 좋아요 수 </span></td>
            </tr>
          </table>
          <br>
        </td>
        <!---- 내용 ---->

      </tr>
    </tbody>
  </table>
  <!---- main ----->

  <br>
<br>
<br>

  <!--footer-->
  <div th:replace = "footer.html"></div>
  <!--footer-->

</body>
</html>